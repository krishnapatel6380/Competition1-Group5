<!-- Define a function to render each book -->
<% function renderBook(book) { %>
  <div class="book-details">
    
    <div class="book-details  ">
    <a href="/single-book/<%= book._id %>">
      <h4>Title: <%= book.title %></h4></a>
      <p><strong> Author: </strong> <%=  book.author %></p>
      <p><strong>Category:</strong> <%=  book.genre %></p>
    
    </div>
    <div>
      <span>
      <form
      class="action-form"
      method="POST"
      action="/single-book/<%= book._id %>?_method=DELETE">

      <button type="submit">Delete</button>
    </form>
    <br>
    <form
        class="action-form"
        method="GET"
        action="/single-book/update/<%= book._id %>"
      >
        <button type="submit" class="update">Update</button>
      </form>
  </span>
    </div>
  </div>
  
<% } %>
  
<!DOCTYPE html>
<html lang="en">
  <!-- Pass a JavaScript variable to a partial in EJS -->
  <%- include('partials/head.ejs', { title: "Home page" }) %>

  <body>
    <%- include('partials/navbar') %>

    <div class="root">
      <div class="body">
      
                <div class="home">
                  <div>
                    <% if (books.length > 0) { %>
                      <!-- Call the renderBook function for each location -->
                      <% books.forEach(renderBook); %> <% } else { %>
                      <p>No books found.</p>
                      <% } %>
                  </div>
                  <form class="create" action="/addbook" method="POST"> <!-- Adjust action attribute as needed -->
                    <h3>Add a New Book</h3>
                    <label>Title:</label><input type="text" name="title" required />
                    <label>Author:</label><input type="text" name="author" required />
                    <label>Category:</label><input type="text" name="genre" required />
                    <button type="submit">Add Book</button>
                  </form>
                </div>
              </div>
            </div>
         
          </html>
       
        
    </div>

    <%- include('partials/footer') %>
  </body>
</html>